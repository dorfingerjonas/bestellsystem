!function(){function t(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function n(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function e(t,e,i){return e&&n(t.prototype,e),i&&n(t,i),t}(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{tPZM:function(n,i,o){"use strict";o.r(i),o.d(i,"OrderModule",function(){return C});var r,c=o("ofXK"),a=o("tyNb"),s=o("6NWb"),u=o("wHSu"),l=o("fXoL"),d=o("7ch9"),b=o("hErN"),f=o("Yc8W"),h=o("xKs8"),g=o("sSZD"),p=((r=function(){function n(e){t(this,n),this.db=e}return e(n,[{key:"persist",value:function(t){var n=this;return this.db.list("stats/orders").push(t),new Promise(function(e,i){n.db.list("orders").push(t).then(function(t){return e()}).catch(function(t){return i()})})}}]),n}()).\u0275fac=function(t){return new(t||r)(l.Rb(g.a))},r.\u0275prov=l.Gb({token:r,factory:r.\u0275fac,providedIn:"root"}),r),m=o("lGQG"),y=function(){return{color:"var(--dark-gray)"}};function v(t,n){if(1&t){var e=l.Ob();l.Nb(0,"div",4),l.Ub("click",function(){var t=n.$implicit;return t.amount=(t.amount||0)+1}),l.Nb(1,"span",5),l.kc(2),l.Mb(),l.Nb(3,"span",6),l.kc(4),l.Mb(),l.Nb(5,"span",7),l.kc(6),l.Mb(),l.Nb(7,"span",8),l.Ub("click",function(){l.fc(e);var t=n.$implicit;return l.Wb(2).decreaseAmount(t)}),l.Lb(8,"fa-icon",9),l.Mb(),l.Mb()}if(2&t){var i=n.$implicit,o=l.Wb(2);l.Ab(2),l.lc(i.amount||0),l.Ab(2),l.lc(i.name),l.Ab(2),l.mc("",i.price,"\u20ac"),l.Ab(2),l.bc("icon",o.minusIcon)("styles",l.dc(5,y))}}function O(t,n){if(1&t&&(l.Nb(0,"div",2),l.Nb(1,"span"),l.kc(2),l.Mb(),l.jc(3,v,9,6,"div",3),l.Mb()),2&t){var e=n.$implicit;l.Ab(2),l.lc(e.title),l.Ab(1),l.bc("ngForOf",e.items)}}var k,M,P=[{path:"",component:(k=function(){function n(e,i,o,r,c,a,s){t(this,n),this.router=e,this.loading=i,this.header=o,this.drinkService=r,this.foodService=c,this.orderService=a,this.auth=s,this.minusIcon=u.c,this.subscriptions=[],this.displayTable=[],this.drinks=[],this.food=[],this.tableNr=parseInt(this.router.url.replace("/order/",""),0)}return e(n,[{key:"ngOnInit",value:function(){var t=this;setTimeout(function(){return t.header.text="Tisch: ".concat(t.tableNr)});var n=this.drinkService.drinks.subscribe(function(n){t.drinks=n,t.buildDisplayTable()});this.subscriptions.push(n),n=this.foodService.food.subscribe(function(n){t.food=n,t.buildDisplayTable()}),this.subscriptions.push(n)}},{key:"ngOnDestroy",value:function(){this.subscriptions.forEach(function(t){t.unsubscribe()})}},{key:"decreaseAmount",value:function(t){t.amount&&t.amount>0&&(t.amount=t.amount-2)}},{key:"order",value:function(){var t=this,n={id:Date.now(),drinks:this.drinks.filter(function(t){return(t.amount||0)>0}),food:this.food.filter(function(t){return(t.amount||0)>0}),table:{nr:this.tableNr},timestamp:Date.now(),waiter:this.auth.username};this.loading.activateLoading(),this.orderService.persist(n).then(function(n){t.loading.deactivateLoading(),t.router.navigateByUrl("/tables")}).catch(function(n){t.loading.deactivateLoading()})}},{key:"buildDisplayTable",value:function(){this.displayTable=[{title:"alkoholische Getr\xe4nke",items:this.drinks.filter(function(t){return"alcohol"===t.category})},{title:"alkoholfreie Getr\xe4nke",items:this.drinks.filter(function(t){return"anti"===t.category})},{title:"Speisen",items:this.food}],this.loading.deactivateLoading()}},{key:"isOrderValid",value:function(){var t=this.drinks.filter(function(t){return(t.amount||0)>0}),n=this.food.filter(function(t){return(t.amount||0)>0});return t.length>0||n.length>0}}]),n}(),k.\u0275fac=function(t){return new(t||k)(l.Kb(a.b),l.Kb(d.a),l.Kb(b.a),l.Kb(f.a),l.Kb(h.a),l.Kb(p),l.Kb(m.a))},k.\u0275cmp=l.Eb({type:k,selectors:[["app-order"]],decls:3,vars:2,consts:[["class","category",4,"ngFor","ngForOf"],[1,"button","btn-danger",3,"disabled","click"],[1,"category"],["class","item",3,"click",4,"ngFor","ngForOf"],[1,"item",3,"click"],[1,"amount"],[1,"name"],[1,"price"],[1,"minus",3,"click"],[3,"icon","styles"]],template:function(t,n){1&t&&(l.jc(0,O,4,2,"div",0),l.Nb(1,"button",1),l.Ub("click",function(){return n.order()}),l.kc(2,"Bestellen"),l.Mb()),2&t&&(l.bc("ngForOf",n.displayTable),l.Ab(1),l.bc("disabled",!n.isOrderValid()))},directives:[c.j,s.a],styles:["[_nghost-%COMP%]{width:100%;display:flex;flex-direction:column}[_nghost-%COMP%]   .category[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:100%;display:block;background:var(--lighter);font-size:4vw;font-weight:bolder;padding:1% 2%;box-sizing:border-box}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{padding:1%;box-sizing:border-box;font-size:3vw;display:flex;flex-direction:row;z-index:99}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]:nth-child(2n-1){background:var(--table-accent)}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .amount[_ngcontent-%COMP%]{width:10%;display:flex;justify-content:center}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{width:60%;display:flex;justify-content:flex-start}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .price[_ngcontent-%COMP%]{width:10%;display:flex;justify-content:center}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%]{width:20%;display:flex;justify-content:center;align-items:center;z-index:101}[_nghost-%COMP%]   .category[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   .minus[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{width:4vw;height:4vw;background:var(--dark-gray);color:var(--white);display:flex;justify-content:center;align-items:center;border-radius:50%}[_nghost-%COMP%]   .button[_ngcontent-%COMP%]{width:80%;margin:15% 10%;transition:all .3s ease-in-out}"]}),k)}],C=((M=function n(){t(this,n)}).\u0275mod=l.Ib({type:M}),M.\u0275inj=l.Hb({factory:function(t){return new(t||M)},imports:[[c.c,a.d.forChild(P),s.b]]}),M)}}])}();