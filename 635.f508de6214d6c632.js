"use strict";(self.webpackChunkordersystem=self.webpackChunkordersystem||[]).push([[635],{8490:(C,u,r)=>{r.d(u,{u:()=>g});var o=r(4412),t=r(7705),f=r(8803);let g=(()=>{class d{constructor(n){this.db=n,this.tables=new o.t([]),this.drinks=new o.t([]),this.food=new o.t([]),this.orders=new o.t([]),this.openOrders=new o.t([]),this.db.list("tables").valueChanges().subscribe(e=>this.tables.next(e||[])),this.db.list("drinks").valueChanges().subscribe(e=>this.drinks.next(e||[])),this.db.list("food").valueChanges().subscribe(e=>this.food.next(e||[])),this.db.list("completed-orders").valueChanges().subscribe(e=>this.orders.next((e||[]).flat(5))),this.db.object("completed-orders").valueChanges().subscribe(e=>{if(!e)return;const c=[];for(const l in e){const b=[];for(const s in e[l])b.push(e[l][s]);const p={nr:l.toString(),openItems:b.filter(s=>!s.paid)};p.openItems.length>0&&c.push(p),this.openOrders.next(c)}}),this.fetchData()}createOrder(n){return new Promise((e,c)=>{this.db.list("pending-orders").push(n).then(l=>e(l)).catch(l=>c(l))})}persistTables(n){return this.db.object("tables").set(n)}persistDrinks(n){return this.db.object("drinks").set(n)}persistFood(n){return this.db.object("food").set(n)}persistCompletedOrderItem(n,e){return this.db.object(`completed-orders/${n}`).set(e)}fetchData(){this.tables.next(this.tables.value),this.drinks.next(this.drinks.value),this.food.next(this.food.value),this.orders.next(this.orders.value)}static{this.\u0275fac=function(e){return new(e||d)(t.KVO(f.w$))}}static{this.\u0275prov=t.jDH({token:d,factory:d.\u0275fac,providedIn:"root"})}}return d})()},4635:(C,u,r)=>{r.r(u),r.d(u,{TablesModule:()=>p});var o=r(177),t=r(7705),f=r(1359),g=r(8490),d=r(7038),m=r(52),n=r(6600);function e(s,v){1&s&&(t.j41(0,"span",3),t.EFF(1,"Keine Tische gefunden"),t.k0s())}function c(s,v){if(1&s&&(t.j41(0,"span",4),t.EFF(1),t.k0s()),2&s){const i=v.$implicit;t.Mz_("routerLink","/order/",i.nr,""),t.R7$(1),t.JRh(i.nr)}}const b=[{path:"",component:(()=>{class s{constructor(i,a,h){this.header=i,this.data=a,this.loading=h,this.subscriptions=[],this.tables=null,this.data.fetchData(),this.loading.activateLoading()}ngOnInit(){setTimeout(()=>this.header.text="Tischauswahl");const i=this.data.tables.subscribe(a=>{this.tables=a,this.loading.deactivateLoading()});this.subscriptions.push(i)}ngOnDestroy(){this.subscriptions.forEach(i=>i.unsubscribe())}static{this.\u0275fac=function(a){return new(a||s)(t.rXU(f.d),t.rXU(g.u),t.rXU(d.U))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-tables"]],decls:3,vars:2,consts:[["id","table-wrapper"],["class","error",4,"ngIf"],["class","table","matRipple","",3,"routerLink",4,"ngFor","ngForOf"],[1,"error"],["matRipple","",1,"table",3,"routerLink"]],template:function(a,h){1&a&&(t.j41(0,"div",0),t.DNE(1,e,2,0,"span",1),t.DNE(2,c,2,2,"span",2),t.k0s()),2&a&&(t.R7$(1),t.Y8G("ngIf",0===(null==h.tables?null:h.tables.length)),t.R7$(1),t.Y8G("ngForOf",h.tables))},dependencies:[o.Sq,o.bT,m.Wk,n.r6],styles:["[_nghost-%COMP%]{width:100%;display:flex;padding-bottom:20%;justify-content:center}#table-wrapper[_ngcontent-%COMP%]{width:88%;display:flex;flex-wrap:wrap;align-items:flex-start}#table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]{width:20vw;height:20vw;margin:1vw;display:flex;justify-content:center;align-items:center;background:#dbdbdb;cursor:pointer;border-radius:15px;transition:.2s ease-in-out background;-webkit-user-select:none;user-select:none;outline:none;font-size:8vw;font-weight:500}#table-wrapper[_ngcontent-%COMP%]   .table[_ngcontent-%COMP%]:hover{background:rgba(252,207,137,.68)}"]})}}return s})()}];let p=(()=>{class s{static{this.\u0275fac=function(a){return new(a||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[o.MD,m.iI.forChild(b),n.pZ]})}}return s})()}}]);